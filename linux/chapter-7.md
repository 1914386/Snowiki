---
description: 셸 스크립트 프로그래밍
---

# Chapter 7

### bash 셸 (Bourne Again SHell)

CentOS 기본 셸로, Bourne Shell(sh)을 기반으로 Korn shell(ksh)과 C shell(csh)의 좋은 점 합침

* Alias(명령어 단축)
* History
* 연산
* Job Control
* 자동 이름 완성
* 프롬프트 제어
* 명령 편집

### 환경 변수

* `echo $환경변수이름` : 환경변수 값 확인
* `export 환경변수=값` : 환경변수 값 변경
* `printenv` 또는 `env` : 거의 모든 환경 변수 확인
* 주요 환경 변수: 430p 참조

### 셸 설정 파일

![](<../.gitbook/assets/Untitled 8>)

### sh 프로그램 작성 및 실행

* \#!/bin/sh : bash를 사용하겠다는 특별한 주석
* exit 0: 종료 코드 반환
* `sh 스크립트파일.sh`으로 실행
* 또는 `chmod +x 스크립트파일.sh`으로 실행 가능 속성 변경 → `./스크립트파일.sh`
  * 일반적으로 셸은 $PATH에 설정된 디렉터리만 찾아봄

### 변수, 명령문

* 변수를 미리 선언하지 않으며, 처음 변수에 값이 할당되면 자동으로 변수가 생성됨
* 변수에 넣는 모든 값은 문자열 취급 (숫자를 넣어도)
* 변수명은 대소문자 구분
* 변수 대입 시 = 좌우에 공백 X
* 변수 값에 공백이 들아가면 ""으로 묶음
* $가 들어간 문자를 출력하려면 ''로 묶거나 앞에 \ 붙임

**expr**: 변수 연산 키워드

* 역따옴표로 묶고, 괄호, \* 앞에는 \을 붙여야 함
* 각 단어 마다 띄어쓰기

**eval**: 문자열을 명령문으로 인식하고 실행

**export**: 외부 변수로 선언(다른 프로그램에서 사용 가능)

**echo, printf**: 출력 함수

* printf: 형식 지정 가능 (454p 참조)

파라미터 변수: $0, $1, ... 등 명령의 부분 하나하나를 변수로 지정

* $\*: 명령 전체의 파라미터 변수

**set**: 결과를 파라미터로 사용

$(명령): 명령 결과를 스크립트에서 사용

**shift**: 파라미터 변수를 왼쪽으로 한 단계씩 이동

—이하 예시는 모두 책 참조—

**if**문: \[ 조건 ] 사이의 각 단어에 공백 필수, \[ ] 대신 test 사용 가능

* if \[ "woo" = "woo" ]와 if test "woo" = "woo"는 동일한 구문
* else if = elif
* 조건문에 들어가는 비교 연산자: 440\~441p

**case**문 (다중 분기)

* 분기 별 실행문 맨 뒤에 ;;
* \[nN]\*): 앞에 n 또는 N이 들어간 모든 단어

조건문에서 관계 연산자

* and: -a (\[ ] 안), &&
* or: -o (\[ ] 안), ||
* 괄호 등 특수문자 앞에는 \\
* 세미콜론(;): 앞뒤 구문을 행으로 분리

**for**\~in문: 값 개수 만큼 반복

* do \~ 반복할 문장

**while**문: 참일 동안 반복

* 조건식 위치에 \[ 1 ]이나 \[ : ], \[ true ]가 오면 항상 참

**until**문: 거짓인 동안(조건식이 참일 때까지) 반복

break: 반복문 종료

continue: 반복문의 조건식으로 돌아감

exit: 해당 프로그램 완전 종료

return: 함수를 호출한 곳으로 돌아감

사용자 정의 함수: 함수 이름() { 내용 }
